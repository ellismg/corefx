using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using Xunit;
using Microsoft.Xunit.Performance;


namespace System.Sorting.Tests
{
    public class SortingTest
    {
        [Fact]
        public static void TestTimSort()
        {
            IComparer<int> iComparer= new IntegerComparer();

            //int[] array = new int[] { 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119 };
            int[] array = new int[] { 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119,22,21,20,19,18,49,48,47,46 };
            int[] arrayClone = (int[])(array.Clone());

            TimSort<int> timsort = new TimSort<int>(array, iComparer);
            timsort.Sort(array, 0, array.Length, iComparer);           
            //TimSort<int>.Default(array, iComparer).Sort(array, 0, array.Length, iComparer);
            Array.Sort(arrayClone, 0, arrayClone.Length, iComparer);           
            for (int i = 0; i < array.Length; i++) Assert.Equal(array[i], arrayClone[i]);
        }

        [Fact]
        public static void TestTimSortPerformance()
        {
            IComparer<int> iComparer = new IntegerComparer();

            //int[] array = new int[] { 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46 };
            //int[] array = new int[] { 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46, 67, 68, 69, 70, 71, 72, 10, 8, 7, 6, 5, 20, 18, 536, 537, 538, 22, 44, 74, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 22, 21, 20, 19, 18, 49, 48, 47, 46 };
            int[] array = new int[6000000];
            int[] arrayTry = new int[2500];
            for (int i = 0; i < 2500; i++)
            {
                arrayTry[i] = i;
            }
            for (int j = 0; j < 2400; j++)
            {               
                arrayTry.CopyTo(array, (j * 2500));
            }
           
            int[] arrayClone = (int[])(array.Clone());


            TimSort<int> timsort = new TimSort<int>(array, iComparer);

            Stopwatch stopwatchTimsort = new Stopwatch();
            stopwatchTimsort.Start();
            //TimSort<int>.Default(array, iComparer).Sort(array, 0, array.Length, iComparer);
           timsort.Sort(array, 0, array.Length, iComparer);
            //timsort.Sort(array, 0, array.Length, iComparer);

            stopwatchTimsort.Stop();

            Stopwatch stopwatchArrayIntrosort = new Stopwatch();
            stopwatchArrayIntrosort.Start();
            Array.Sort(arrayClone, 0, arrayClone.Length, iComparer);
            stopwatchArrayIntrosort.Stop();

            Assert.True(stopwatchTimsort.ElapsedMilliseconds < stopwatchArrayIntrosort.ElapsedMilliseconds);
           
        }
        private class IntegerComparer : IComparer<int>
        {
            public int Compare(object x, object y)
            {
                return Compare((int)x, (int)y);
            }

            public int Compare(int x, int y)
            {
                return x - y;
            }

        }
    }
}
